.include "macros.inc"

.if 0

.section .text  # 0x8009E02C - 0x8009E7F8

.global zLightResetAll__FP4xEnv
zLightResetAll__FP4xEnv:
/* 8009E02C 0009AE2C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8009E030 0009AE30  7C 08 02 A6 */	mflr r0
/* 8009E034 0009AE34  3C 80 80 2F */	lis r4, lbl_802E8F88@ha
/* 8009E038 0009AE38  38 A0 00 80 */	li r5, 0x80
/* 8009E03C 0009AE3C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8009E040 0009AE40  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8009E044 0009AE44  7C 7F 1B 78 */	mr r31, r3
/* 8009E048 0009AE48  38 64 8F 88 */	addi r3, r4, lbl_802E8F88@l
/* 8009E04C 0009AE4C  38 80 00 00 */	li r4, 0
/* 8009E050 0009AE50  4B F6 54 09 */	bl memset
/* 8009E054 0009AE54  38 00 00 00 */	li r0, 0
/* 8009E058 0009AE58  90 0D 8F E8 */	stw r0, lbl_803CB8E8-_SDA_BASE_(r13)
/* 8009E05C 0009AE5C  80 8D 8F EC */	lwz r4, lbl_803CB8EC-_SDA_BASE_(r13)
/* 8009E060 0009AE60  28 04 00 00 */	cmplwi r4, 0
/* 8009E064 0009AE64  41 82 00 20 */	beq lbl_8009E084
/* 8009E068 0009AE68  3C 60 80 2F */	lis r3, lbl_802E9008@ha
/* 8009E06C 0009AE6C  38 A0 00 0A */	li r5, 0xa
/* 8009E070 0009AE70  38 63 90 08 */	addi r3, r3, lbl_802E9008@l
/* 8009E074 0009AE74  38 C0 00 01 */	li r6, 1
/* 8009E078 0009AE78  38 E0 00 0A */	li r7, 0xa
/* 8009E07C 0009AE7C  4B F9 AC 05 */	bl xPartitionVolume__FP13_tagPartitionP7xVolumeiii
/* 8009E080 0009AE80  48 00 00 20 */	b lbl_8009E0A0
lbl_8009E084:
/* 8009E084 0009AE84  3C 60 80 2F */	lis r3, lbl_802E9008@ha
/* 8009E088 0009AE88  7F E4 FB 78 */	mr r4, r31
/* 8009E08C 0009AE8C  38 63 90 08 */	addi r3, r3, lbl_802E9008@l
/* 8009E090 0009AE90  38 A0 00 0A */	li r5, 0xa
/* 8009E094 0009AE94  38 C0 00 01 */	li r6, 1
/* 8009E098 0009AE98  38 E0 00 0A */	li r7, 0xa
/* 8009E09C 0009AE9C  4B F9 AD 7D */	bl xPartitionWorld__FP13_tagPartitionP4xEnviii
lbl_8009E0A0:
/* 8009E0A0 0009AEA0  3C 60 80 2F */	lis r3, lbl_802E9008@ha
/* 8009E0A4 0009AEA4  3C 80 80 26 */	lis r4, lbl_8025CD30@ha
/* 8009E0A8 0009AEA8  38 63 90 08 */	addi r3, r3, lbl_802E9008@l
/* 8009E0AC 0009AEAC  38 84 CD 30 */	addi r4, r4, lbl_8025CD30@l
/* 8009E0B0 0009AEB0  4B F9 B1 BD */	bl xPartitionDump__FP13_tagPartitionPc
/* 8009E0B4 0009AEB4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8009E0B8 0009AEB8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8009E0BC 0009AEBC  7C 08 03 A6 */	mtlr r0
/* 8009E0C0 0009AEC0  38 21 00 10 */	addi r1, r1, 0x10
/* 8009E0C4 0009AEC4  4E 80 00 20 */	blr 

.global zLightUpdate__FP5xBaseP6xScenef
zLightUpdate__FP5xBaseP6xScenef:
/* 8009E4D8 0009B2D8  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8009E4DC 0009B2DC  7C 08 02 A6 */	mflr r0
/* 8009E4E0 0009B2E0  90 01 00 34 */	stw r0, 0x34(r1)
/* 8009E4E4 0009B2E4  DB E1 00 20 */	stfd f31, 0x20(r1)
/* 8009E4E8 0009B2E8  F3 E1 00 28 */	psq_st f31, 40(r1), 0, qr0
/* 8009E4EC 0009B2EC  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8009E4F0 0009B2F0  80 03 00 10 */	lwz r0, 0x10(r3)
/* 8009E4F4 0009B2F4  FF E0 08 90 */	fmr f31, f1
/* 8009E4F8 0009B2F8  7C 7F 1B 78 */	mr r31, r3
/* 8009E4FC 0009B2FC  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8009E500 0009B300  41 82 00 70 */	beq lbl_8009E570
/* 8009E504 0009B304  80 7F 00 54 */	lwz r3, 0x54(r31)
/* 8009E508 0009B308  28 03 00 00 */	cmplwi r3, 0
/* 8009E50C 0009B30C  41 82 00 64 */	beq lbl_8009E570
/* 8009E510 0009B310  4B F7 D2 F9 */	bl xEntGetPos__FPC4xEnt
/* 8009E514 0009B314  80 A3 00 00 */	lwz r5, 0(r3)
/* 8009E518 0009B318  38 81 00 08 */	addi r4, r1, 8
/* 8009E51C 0009B31C  80 03 00 04 */	lwz r0, 4(r3)
/* 8009E520 0009B320  90 01 00 0C */	stw r0, 0xc(r1)
/* 8009E524 0009B324  90 A1 00 08 */	stw r5, 8(r1)
/* 8009E528 0009B328  C0 21 00 0C */	lfs f1, 0xc(r1)
/* 8009E52C 0009B32C  80 03 00 08 */	lwz r0, 8(r3)
/* 8009E530 0009B330  38 7F 00 18 */	addi r3, r31, 0x18
/* 8009E534 0009B334  90 01 00 10 */	stw r0, 0x10(r1)
/* 8009E538 0009B338  C0 02 91 D8 */	lfs f0, lbl_803CDB58-_SDA2_BASE_(r2)
/* 8009E53C 0009B33C  EC 01 00 2A */	fadds f0, f1, f0
/* 8009E540 0009B340  D0 01 00 0C */	stfs f0, 0xc(r1)
/* 8009E544 0009B344  48 02 68 11 */	bl iLightSetPos__FP6iLightP5xVec3
/* 8009E548 0009B348  38 7F 00 20 */	addi r3, r31, 0x20
/* 8009E54C 0009B34C  38 81 00 08 */	addi r4, r1, 8
/* 8009E550 0009B350  4B F6 CD 15 */	bl __as__5xVec3FRC5xVec3
/* 8009E554 0009B354  3C 60 80 2F */	lis r3, lbl_802E9008@ha
/* 8009E558 0009B358  80 BF 00 58 */	lwz r5, 0x58(r31)
/* 8009E55C 0009B35C  38 63 90 08 */	addi r3, r3, lbl_802E9008@l
/* 8009E560 0009B360  7F E4 FB 78 */	mr r4, r31
/* 8009E564 0009B364  38 C1 00 08 */	addi r6, r1, 8
/* 8009E568 0009B368  4B F9 AB 51 */	bl xPartitionUpdate__FP13_tagPartitionPviP5xVec3
/* 8009E56C 0009B36C  90 7F 00 58 */	stw r3, 0x58(r31)
lbl_8009E570:
/* 8009E570 0009B370  80 1F 00 60 */	lwz r0, 0x60(r31)
/* 8009E574 0009B374  3C 60 80 29 */	lis r3, sEffectFuncs@ha
/* 8009E578 0009B378  38 63 FA C0 */	addi r3, r3, sEffectFuncs@l
/* 8009E57C 0009B37C  54 00 10 3A */	slwi r0, r0, 2
/* 8009E580 0009B380  7D 83 00 2E */	lwzx r12, r3, r0
/* 8009E584 0009B384  28 0C 00 00 */	cmplwi r12, 0
/* 8009E588 0009B388  41 82 00 14 */	beq lbl_8009E59C
/* 8009E58C 0009B38C  FC 20 F8 90 */	fmr f1, f31
/* 8009E590 0009B390  7F E3 FB 78 */	mr r3, r31
/* 8009E594 0009B394  7D 89 03 A6 */	mtctr r12
/* 8009E598 0009B398  4E 80 04 21 */	bctrl 
lbl_8009E59C:
/* 8009E59C 0009B39C  E3 E1 00 28 */	psq_l f31, 40(r1), 0, qr0
/* 8009E5A0 0009B3A0  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8009E5A4 0009B3A4  CB E1 00 20 */	lfd f31, 0x20(r1)
/* 8009E5A8 0009B3A8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8009E5AC 0009B3AC  7C 08 03 A6 */	mtlr r0
/* 8009E5B0 0009B3B0  38 21 00 30 */	addi r1, r1, 0x30
/* 8009E5B4 0009B3B4  4E 80 00 20 */	blr 

.global zLightAddLocalEnv__Fv
zLightAddLocalEnv__Fv:
/* 8009E5B8 0009B3B8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8009E5BC 0009B3BC  7C 08 02 A6 */	mflr r0
/* 8009E5C0 0009B3C0  3C 60 80 2F */	lis r3, lbl_802E8F88@ha
/* 8009E5C4 0009B3C4  90 01 00 24 */	stw r0, 0x24(r1)
/* 8009E5C8 0009B3C8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8009E5CC 0009B3CC  3B E3 8F 88 */	addi r31, r3, lbl_802E8F88@l
/* 8009E5D0 0009B3D0  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8009E5D4 0009B3D4  3B C0 00 00 */	li r30, 0
/* 8009E5D8 0009B3D8  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8009E5DC 0009B3DC  93 81 00 10 */	stw r28, 0x10(r1)
/* 8009E5E0 0009B3E0  48 00 00 A0 */	b lbl_8009E680
lbl_8009E5E4:
/* 8009E5E4 0009B3E4  83 BF 00 00 */	lwz r29, 0(r31)
/* 8009E5E8 0009B3E8  80 1D 00 10 */	lwz r0, 0x10(r29)
/* 8009E5EC 0009B3EC  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8009E5F0 0009B3F0  41 82 00 88 */	beq lbl_8009E678
/* 8009E5F4 0009B3F4  80 7D 00 14 */	lwz r3, 0x14(r29)
/* 8009E5F8 0009B3F8  80 03 00 0C */	lwz r0, 0xc(r3)
/* 8009E5FC 0009B3FC  54 00 07 39 */	rlwinm. r0, r0, 0, 0x1c, 0x1c
/* 8009E600 0009B400  41 82 00 78 */	beq lbl_8009E678
/* 8009E604 0009B404  3B 9D 00 18 */	addi r28, r29, 0x18
/* 8009E608 0009B408  38 80 00 01 */	li r4, 1
/* 8009E60C 0009B40C  7F 83 E3 78 */	mr r3, r28
/* 8009E610 0009B410  48 02 67 E9 */	bl iLightEnv__FP6iLighti
/* 8009E614 0009B414  80 AD 92 08 */	lwz r5, gLightWorld-_SDA_BASE_(r13)
/* 8009E618 0009B418  3C 60 80 2F */	lis r3, lbl_802E9048@ha
/* 8009E61C 0009B41C  80 9C 00 04 */	lwz r4, 4(r28)
/* 8009E620 0009B420  38 63 90 48 */	addi r3, r3, lbl_802E9048@l
/* 8009E624 0009B424  80 05 00 40 */	lwz r0, 0x40(r5)
/* 8009E628 0009B428  90 04 00 38 */	stw r0, 0x38(r4)
/* 8009E62C 0009B42C  80 AD 92 08 */	lwz r5, gLightWorld-_SDA_BASE_(r13)
/* 8009E630 0009B430  80 9C 00 04 */	lwz r4, 4(r28)
/* 8009E634 0009B434  38 05 00 3C */	addi r0, r5, 0x3c
/* 8009E638 0009B438  90 04 00 34 */	stw r0, 0x34(r4)
/* 8009E63C 0009B43C  80 8D 92 08 */	lwz r4, gLightWorld-_SDA_BASE_(r13)
/* 8009E640 0009B440  80 BC 00 04 */	lwz r5, 4(r28)
/* 8009E644 0009B444  80 84 00 40 */	lwz r4, 0x40(r4)
/* 8009E648 0009B448  38 05 00 34 */	addi r0, r5, 0x34
/* 8009E64C 0009B44C  90 04 00 00 */	stw r0, 0(r4)
/* 8009E650 0009B450  80 BC 00 04 */	lwz r5, 4(r28)
/* 8009E654 0009B454  80 8D 92 08 */	lwz r4, gLightWorld-_SDA_BASE_(r13)
/* 8009E658 0009B458  38 05 00 34 */	addi r0, r5, 0x34
/* 8009E65C 0009B45C  90 04 00 40 */	stw r0, 0x40(r4)
/* 8009E660 0009B460  80 0D 8F F0 */	lwz r0, lbl_803CB8F0-_SDA_BASE_(r13)
/* 8009E664 0009B464  54 00 10 3A */	slwi r0, r0, 2
/* 8009E668 0009B468  7F A3 01 2E */	stwx r29, r3, r0
/* 8009E66C 0009B46C  80 6D 8F F0 */	lwz r3, lbl_803CB8F0-_SDA_BASE_(r13)
/* 8009E670 0009B470  38 03 00 01 */	addi r0, r3, 1
/* 8009E674 0009B474  90 0D 8F F0 */	stw r0, lbl_803CB8F0-_SDA_BASE_(r13)
lbl_8009E678:
/* 8009E678 0009B478  3B FF 00 04 */	addi r31, r31, 4
/* 8009E67C 0009B47C  3B DE 00 01 */	addi r30, r30, 1
lbl_8009E680:
/* 8009E680 0009B480  80 0D 8F E8 */	lwz r0, lbl_803CB8E8-_SDA_BASE_(r13)
/* 8009E684 0009B484  7C 1E 00 00 */	cmpw r30, r0
/* 8009E688 0009B488  41 80 FF 5C */	blt lbl_8009E5E4
/* 8009E68C 0009B48C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8009E690 0009B490  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8009E694 0009B494  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8009E698 0009B498  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8009E69C 0009B49C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8009E6A0 0009B4A0  7C 08 03 A6 */	mtlr r0
/* 8009E6A4 0009B4A4  38 21 00 20 */	addi r1, r1, 0x20
/* 8009E6A8 0009B4A8  4E 80 00 20 */	blr 

.global zLightAddLocal__FP4xEnt
zLightAddLocal__FP4xEnt:
/* 8009E6AC 0009B4AC  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8009E6B0 0009B4B0  7C 08 02 A6 */	mflr r0
/* 8009E6B4 0009B4B4  90 01 00 24 */	stw r0, 0x24(r1)
/* 8009E6B8 0009B4B8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8009E6BC 0009B4BC  7C 7F 1B 78 */	mr r31, r3
/* 8009E6C0 0009B4C0  4B F7 D1 49 */	bl xEntGetPos__FPC4xEnt
/* 8009E6C4 0009B4C4  80 83 00 00 */	lwz r4, 0(r3)
/* 8009E6C8 0009B4C8  80 03 00 04 */	lwz r0, 4(r3)
/* 8009E6CC 0009B4CC  90 01 00 0C */	stw r0, 0xc(r1)
/* 8009E6D0 0009B4D0  90 81 00 08 */	stw r4, 8(r1)
/* 8009E6D4 0009B4D4  C0 21 00 0C */	lfs f1, 0xc(r1)
/* 8009E6D8 0009B4D8  80 03 00 08 */	lwz r0, 8(r3)
/* 8009E6DC 0009B4DC  90 01 00 10 */	stw r0, 0x10(r1)
/* 8009E6E0 0009B4E0  C0 02 91 D8 */	lfs f0, lbl_803CDB58-_SDA2_BASE_(r2)
/* 8009E6E4 0009B4E4  EC 01 00 2A */	fadds f0, f1, f0
/* 8009E6E8 0009B4E8  D0 01 00 0C */	stfs f0, 0xc(r1)
/* 8009E6EC 0009B4EC  80 1F 00 C4 */	lwz r0, 0xc4(r31)
/* 8009E6F0 0009B4F0  28 00 00 00 */	cmplwi r0, 0
/* 8009E6F4 0009B4F4  40 82 00 44 */	bne lbl_8009E738
/* 8009E6F8 0009B4F8  80 6D 89 E0 */	lwz r3, gActiveHeap-_SDA_BASE_(r13)
/* 8009E6FC 0009B4FC  38 80 00 28 */	li r4, 0x28
/* 8009E700 0009B500  38 A0 00 00 */	li r5, 0
/* 8009E704 0009B504  4B F9 52 3D */	bl xMemAlloc__FUiUii
/* 8009E708 0009B508  90 7F 00 C4 */	stw r3, 0xc4(r31)
/* 8009E70C 0009B50C  7F E3 FB 78 */	mr r3, r31
/* 8009E710 0009B510  80 9F 00 C4 */	lwz r4, 0xc4(r31)
/* 8009E714 0009B514  4B F7 CF F9 */	bl xEntInitShadow__FR4xEntR10xEntShadow
/* 8009E718 0009B518  80 7F 00 C4 */	lwz r3, 0xc4(r31)
/* 8009E71C 0009B51C  38 81 00 08 */	addi r4, r1, 8
/* 8009E720 0009B520  4B F6 CB 45 */	bl __as__5xVec3FRC5xVec3
/* 8009E724 0009B524  80 BF 00 C4 */	lwz r5, 0xc4(r31)
/* 8009E728 0009B528  3C 60 80 29 */	lis r3, lbl_8028FB50@ha
/* 8009E72C 0009B52C  38 83 FB 50 */	addi r4, r3, lbl_8028FB50@l
/* 8009E730 0009B530  38 65 00 0C */	addi r3, r5, 0xc
/* 8009E734 0009B534  4B F6 CB 31 */	bl __as__5xVec3FRC5xVec3
lbl_8009E738:
/* 8009E738 0009B538  80 7F 00 C4 */	lwz r3, 0xc4(r31)
/* 8009E73C 0009B53C  C0 22 91 D8 */	lfs f1, lbl_803CDB58-_SDA2_BASE_(r2)
/* 8009E740 0009B540  38 83 00 0C */	addi r4, r3, 0xc
/* 8009E744 0009B544  4B FA 61 7D */	bl xShadowSetLight__FP5xVec3P5xVec3f
/* 8009E748 0009B548  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8009E74C 0009B54C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8009E750 0009B550  7C 08 03 A6 */	mtlr r0
/* 8009E754 0009B554  38 21 00 20 */	addi r1, r1, 0x20
/* 8009E758 0009B558  4E 80 00 20 */	blr 

.endif

.section .rodata
.global zLight_strings
zLight_strings:
	.4byte 0x4C696768
	.4byte 0x74696E67
	.4byte 0x004C4947
	.4byte 0x48545F50
	.4byte 0x41525449
	.4byte 0x54494F4E
	.4byte 0x00000000
	.4byte 0x00000000

.section .data
.global sDefaultShadowVec
sDefaultShadowVec:
	.4byte 0x00000000
	.4byte 0x3F800000
	.4byte 0x00000000
	.4byte 0x00000000
/* SPECULATION: link order */
.global lightning_type_names
lightning_type_names:
	.4byte 0x8025CD50
	.4byte 0x8025CD55
	.4byte 0x8025CD5E
	.4byte 0x8025CD63

.section .bss
.global sLight
sLight:
	.skip 0x80
.global sLightPart
sLightPart:
	.skip 0x40
.global gTemporaryLights
gTemporaryLights:
	.skip 0x80

.section .sbss
.global sLightTotal
sLightTotal:
  .skip 0x4
.global sPartitionVolume
sPartitionVolume:
	.skip 0x4
.global gNumTemporaryLights
gNumTemporaryLights:
	.skip 0x8

.section .sdata2
.global zLight_float
zLight_float:
	.4byte 0x3F800000
	.4byte 0x00000000
