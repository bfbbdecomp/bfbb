.include "macros.inc"
.file "balight.c"

# 0x8021714C - 0x80217918
.text
.balign 4

.fn LightTidyDestroyLight, local
/* 8021714C 0021422C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217150 00214230  7C 08 02 A6 */	mflr r0
/* 80217154 00214234  90 01 00 14 */	stw r0, 0x14(r1)
/* 80217158 00214238  48 00 05 69 */	bl RpLightDestroy
/* 8021715C 0021423C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80217160 00214240  7C 08 03 A6 */	mtlr r0
/* 80217164 00214244  38 21 00 10 */	addi r1, r1, 0x10
/* 80217168 00214248  4E 80 00 20 */	blr
.endfn LightTidyDestroyLight

.fn LightSync, local
/* 8021716C 0021424C  4E 80 00 20 */	blr
.endfn LightSync

.fn RpLightSetRadius, global
/* 80217170 00214250  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217174 00214254  7C 08 02 A6 */	mflr r0
/* 80217178 00214258  90 01 00 14 */	stw r0, 0x14(r1)
/* 8021717C 0021425C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80217180 00214260  7C 7F 1B 78 */	mr r31, r3
/* 80217184 00214264  80 63 00 04 */	lwz r3, 0x4(r3)
/* 80217188 00214268  28 03 00 00 */	cmplwi r3, 0x0
/* 8021718C 0021426C  D0 3F 00 14 */	stfs f1, 0x14(r31)
/* 80217190 00214270  41 82 00 08 */	beq .L_80217198
/* 80217194 00214274  48 02 1E 31 */	bl RwFrameUpdateObjects
.L_80217198:
/* 80217198 00214278  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8021719C 0021427C  7F E3 FB 78 */	mr r3, r31
/* 802171A0 00214280  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 802171A4 00214284  7C 08 03 A6 */	mtlr r0
/* 802171A8 00214288  38 21 00 10 */	addi r1, r1, 0x10
/* 802171AC 0021428C  4E 80 00 20 */	blr
.endfn RpLightSetRadius

.fn RpLightSetColor, global
/* 802171B0 00214290  80 A4 00 00 */	lwz r5, 0x0(r4)
/* 802171B4 00214294  80 04 00 04 */	lwz r0, 0x4(r4)
/* 802171B8 00214298  90 A3 00 18 */	stw r5, 0x18(r3)
/* 802171BC 0021429C  80 A4 00 08 */	lwz r5, 0x8(r4)
/* 802171C0 002142A0  90 03 00 1C */	stw r0, 0x1c(r3)
/* 802171C4 002142A4  80 04 00 0C */	lwz r0, 0xc(r4)
/* 802171C8 002142A8  90 A3 00 20 */	stw r5, 0x20(r3)
/* 802171CC 002142AC  90 03 00 24 */	stw r0, 0x24(r3)
/* 802171D0 002142B0  C0 23 00 18 */	lfs f1, 0x18(r3)
/* 802171D4 002142B4  C0 03 00 1C */	lfs f0, 0x1c(r3)
/* 802171D8 002142B8  FC 01 00 00 */	fcmpu cr0, f1, f0
/* 802171DC 002142BC  40 82 00 1C */	bne .L_802171F8
/* 802171E0 002142C0  C0 03 00 20 */	lfs f0, 0x20(r3)
/* 802171E4 002142C4  FC 01 00 00 */	fcmpu cr0, f1, f0
/* 802171E8 002142C8  40 82 00 10 */	bne .L_802171F8
/* 802171EC 002142CC  38 00 00 01 */	li r0, 0x1
/* 802171F0 002142D0  98 03 00 03 */	stb r0, 0x3(r3)
/* 802171F4 002142D4  4E 80 00 20 */	blr
.L_802171F8:
/* 802171F8 002142D8  38 00 00 00 */	li r0, 0x0
/* 802171FC 002142DC  98 03 00 03 */	stb r0, 0x3(r3)
/* 80217200 002142E0  4E 80 00 20 */	blr
.endfn RpLightSetColor

.fn RpLightGetConeAngle, global
/* 80217204 002142E4  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80217208 002142E8  7C 08 02 A6 */	mflr r0
/* 8021720C 002142EC  90 01 00 34 */	stw r0, 0x34(r1)
/* 80217210 002142F0  DB E1 00 20 */	stfd f31, 0x20(r1)
/* 80217214 002142F4  F3 E1 00 28 */	psq_st f31, 0x28(r1), 0, qr0
/* 80217218 002142F8  C0 03 00 28 */	lfs f0, 0x28(r3)
/* 8021721C 002142FC  3C 00 3F 80 */	lis r0, 0x3f80
/* 80217220 00214300  FC E0 00 50 */	fneg f7, f0
/* 80217224 00214304  D0 E1 00 10 */	stfs f7, 0x10(r1)
/* 80217228 00214308  80 61 00 10 */	lwz r3, 0x10(r1)
/* 8021722C 0021430C  54 64 00 7E */	clrlwi r4, r3, 1
/* 80217230 00214310  7C 04 00 00 */	cmpw r4, r0
/* 80217234 00214314  41 80 00 1C */	blt .L_80217250
/* 80217238 00214318  2C 03 00 00 */	cmpwi r3, 0x0
/* 8021723C 0021431C  40 81 00 0C */	ble .L_80217248
/* 80217240 00214320  C0 22 BB 68 */	lfs f1, "@336"@sda21(r2)
/* 80217244 00214324  48 00 01 D4 */	b .L_80217418
.L_80217248:
/* 80217248 00214328  C0 22 BB 6C */	lfs f1, "@337"@sda21(r2)
/* 8021724C 0021432C  48 00 01 CC */	b .L_80217418
.L_80217250:
/* 80217250 00214330  3C 00 3F 00 */	lis r0, 0x3f00
/* 80217254 00214334  7C 04 00 00 */	cmpw r4, r0
/* 80217258 00214338  40 80 00 8C */	bge .L_802172E4
/* 8021725C 0021433C  3C 00 23 00 */	lis r0, 0x2300
/* 80217260 00214340  7C 04 00 00 */	cmpw r4, r0
/* 80217264 00214344  41 81 00 0C */	bgt .L_80217270
/* 80217268 00214348  C0 22 BB 70 */	lfs f1, "@338"@sda21(r2)
/* 8021726C 0021434C  48 00 01 AC */	b .L_80217418
.L_80217270:
/* 80217270 00214350  ED 07 01 F2 */	fmuls f8, f7, f7
/* 80217274 00214354  C0 22 BB 90 */	lfs f1, "@346"@sda21(r2)
/* 80217278 00214358  C0 02 BB 8C */	lfs f0, "@345"@sda21(r2)
/* 8021727C 0021435C  C0 62 BB 88 */	lfs f3, "@344"@sda21(r2)
/* 80217280 00214360  EC 81 02 3A */	fmadds f4, f1, f8, f0
/* 80217284 00214364  C0 42 BB 84 */	lfs f2, "@343"@sda21(r2)
/* 80217288 00214368  C0 22 BB A4 */	lfs f1, "@351"@sda21(r2)
/* 8021728C 0021436C  C0 02 BB A0 */	lfs f0, "@350"@sda21(r2)
/* 80217290 00214370  EC 68 19 3A */	fmadds f3, f8, f4, f3
/* 80217294 00214374  C0 A2 BB 80 */	lfs f5, "@342"@sda21(r2)
/* 80217298 00214378  EC 21 02 3A */	fmadds f1, f1, f8, f0
/* 8021729C 0021437C  C0 02 BB 9C */	lfs f0, "@349"@sda21(r2)
/* 802172A0 00214380  C0 82 BB 7C */	lfs f4, "@341"@sda21(r2)
/* 802172A4 00214384  EC C8 10 FA */	fmadds f6, f8, f3, f2
/* 802172A8 00214388  EC 68 00 7A */	fmadds f3, f8, f1, f0
/* 802172AC 0021438C  C0 42 BB 98 */	lfs f2, "@348"@sda21(r2)
/* 802172B0 00214390  C0 22 BB 94 */	lfs f1, "@347"@sda21(r2)
/* 802172B4 00214394  EC A8 29 BA */	fmadds f5, f8, f6, f5
/* 802172B8 00214398  C0 02 BB 78 */	lfs f0, "@340"@sda21(r2)
/* 802172BC 0021439C  EC 48 10 FA */	fmadds f2, f8, f3, f2
/* 802172C0 002143A0  C0 C2 BB 74 */	lfs f6, "@339"@sda21(r2)
/* 802172C4 002143A4  EC 68 21 7A */	fmadds f3, f8, f5, f4
/* 802172C8 002143A8  EC 28 08 BA */	fmadds f1, f8, f2, f1
/* 802172CC 002143AC  EC 48 00 F2 */	fmuls f2, f8, f3
/* 802172D0 002143B0  EC 22 08 24 */	fdivs f1, f2, f1
/* 802172D4 002143B4  EC 07 00 7C */	fnmsubs f0, f7, f1, f0
/* 802172D8 002143B8  EC 07 00 28 */	fsubs f0, f7, f0
/* 802172DC 002143BC  EC 26 00 28 */	fsubs f1, f6, f0
/* 802172E0 002143C0  48 00 01 38 */	b .L_80217418
.L_802172E4:
/* 802172E4 002143C4  2C 03 00 00 */	cmpwi r3, 0x0
/* 802172E8 002143C8  40 80 00 90 */	bge .L_80217378
/* 802172EC 002143CC  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 802172F0 002143D0  C0 22 BB A8 */	lfs f1, "@352"@sda21(r2)
/* 802172F4 002143D4  EC 00 38 2A */	fadds f0, f0, f7
/* 802172F8 002143D8  EF E1 00 32 */	fmuls f31, f1, f0
/* 802172FC 002143DC  FC 20 F8 90 */	fmr f1, f31
/* 80217300 002143E0  48 01 C9 C5 */	bl _rwSqrt
/* 80217304 002143E4  C0 42 BB 90 */	lfs f2, "@346"@sda21(r2)
/* 80217308 002143E8  C0 02 BB 8C */	lfs f0, "@345"@sda21(r2)
/* 8021730C 002143EC  C0 82 BB 88 */	lfs f4, "@344"@sda21(r2)
/* 80217310 002143F0  EC A2 07 FA */	fmadds f5, f2, f31, f0
/* 80217314 002143F4  C0 62 BB 84 */	lfs f3, "@343"@sda21(r2)
/* 80217318 002143F8  C0 42 BB A4 */	lfs f2, "@351"@sda21(r2)
/* 8021731C 002143FC  C0 02 BB A0 */	lfs f0, "@350"@sda21(r2)
/* 80217320 00214400  EC 9F 21 7A */	fmadds f4, f31, f5, f4
/* 80217324 00214404  C0 C2 BB 80 */	lfs f6, "@342"@sda21(r2)
/* 80217328 00214408  EC 42 07 FA */	fmadds f2, f2, f31, f0
/* 8021732C 0021440C  C0 02 BB 9C */	lfs f0, "@349"@sda21(r2)
/* 80217330 00214410  C0 A2 BB 7C */	lfs f5, "@341"@sda21(r2)
/* 80217334 00214414  EC FF 19 3A */	fmadds f7, f31, f4, f3
/* 80217338 00214418  EC 9F 00 BA */	fmadds f4, f31, f2, f0
/* 8021733C 0021441C  C0 02 BB 98 */	lfs f0, "@348"@sda21(r2)
/* 80217340 00214420  C0 62 BB 94 */	lfs f3, "@347"@sda21(r2)
/* 80217344 00214424  EC DF 31 FA */	fmadds f6, f31, f7, f6
/* 80217348 00214428  C0 42 BB 78 */	lfs f2, "@340"@sda21(r2)
/* 8021734C 0021442C  EC 9F 01 3A */	fmadds f4, f31, f4, f0
/* 80217350 00214430  C0 E2 BB B0 */	lfs f7, "@354"@sda21(r2)
/* 80217354 00214434  EC BF 29 BA */	fmadds f5, f31, f6, f5
/* 80217358 00214438  C0 02 BB AC */	lfs f0, "@353"@sda21(r2)
/* 8021735C 0021443C  EC 7F 19 3A */	fmadds f3, f31, f4, f3
/* 80217360 00214440  EC 9F 01 72 */	fmuls f4, f31, f5
/* 80217364 00214444  EC 64 18 24 */	fdivs f3, f4, f3
/* 80217368 00214448  EC 43 10 78 */	fmsubs f2, f3, f1, f2
/* 8021736C 0021444C  EC 21 10 2A */	fadds f1, f1, f2
/* 80217370 00214450  EC 27 00 7C */	fnmsubs f1, f7, f1, f0
/* 80217374 00214454  48 00 00 A4 */	b .L_80217418
.L_80217378:
/* 80217378 00214458  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 8021737C 0021445C  C0 22 BB A8 */	lfs f1, "@352"@sda21(r2)
/* 80217380 00214460  EC 00 38 28 */	fsubs f0, f0, f7
/* 80217384 00214464  EF E1 00 32 */	fmuls f31, f1, f0
/* 80217388 00214468  FC 20 F8 90 */	fmr f1, f31
/* 8021738C 0021446C  48 01 C9 39 */	bl _rwSqrt
/* 80217390 00214470  C0 42 BB 90 */	lfs f2, "@346"@sda21(r2)
/* 80217394 00214474  C0 02 BB 8C */	lfs f0, "@345"@sda21(r2)
/* 80217398 00214478  D0 21 00 0C */	stfs f1, 0xc(r1)
/* 8021739C 0021447C  EC 42 07 FA */	fmadds f2, f2, f31, f0
/* 802173A0 00214480  C0 02 BB 88 */	lfs f0, "@344"@sda21(r2)
/* 802173A4 00214484  80 01 00 0C */	lwz r0, 0xc(r1)
/* 802173A8 00214488  C0 62 BB 84 */	lfs f3, "@343"@sda21(r2)
/* 802173AC 0021448C  EC 9F 00 BA */	fmadds f4, f31, f2, f0
/* 802173B0 00214490  C0 42 BB A4 */	lfs f2, "@351"@sda21(r2)
/* 802173B4 00214494  C0 02 BB A0 */	lfs f0, "@350"@sda21(r2)
/* 802173B8 00214498  54 00 00 26 */	clrrwi r0, r0, 12
/* 802173BC 0021449C  90 01 00 08 */	stw r0, 0x8(r1)
/* 802173C0 002144A0  EC 9F 19 3A */	fmadds f4, f31, f4, f3
/* 802173C4 002144A4  C0 62 BB 80 */	lfs f3, "@342"@sda21(r2)
/* 802173C8 002144A8  EC 42 07 FA */	fmadds f2, f2, f31, f0
/* 802173CC 002144AC  C0 02 BB 9C */	lfs f0, "@349"@sda21(r2)
/* 802173D0 002144B0  EC 9F 19 3A */	fmadds f4, f31, f4, f3
/* 802173D4 002144B4  C0 62 BB 7C */	lfs f3, "@341"@sda21(r2)
/* 802173D8 002144B8  EC 5F 00 BA */	fmadds f2, f31, f2, f0
/* 802173DC 002144BC  C0 02 BB 98 */	lfs f0, "@348"@sda21(r2)
/* 802173E0 002144C0  C0 C1 00 08 */	lfs f6, 0x8(r1)
/* 802173E4 002144C4  EC BF 19 3A */	fmadds f5, f31, f4, f3
/* 802173E8 002144C8  EC 9F 00 BA */	fmadds f4, f31, f2, f0
/* 802173EC 002144CC  C0 62 BB 94 */	lfs f3, "@347"@sda21(r2)
/* 802173F0 002144D0  EC 46 F9 BC */	fnmsubs f2, f6, f6, f31
/* 802173F4 002144D4  C0 E2 BB B0 */	lfs f7, "@354"@sda21(r2)
/* 802173F8 002144D8  EC 01 30 2A */	fadds f0, f1, f6
/* 802173FC 002144DC  EC BF 01 72 */	fmuls f5, f31, f5
/* 80217400 002144E0  EC 7F 19 3A */	fmadds f3, f31, f4, f3
/* 80217404 002144E4  EC 02 00 24 */	fdivs f0, f2, f0
/* 80217408 002144E8  EC 45 18 24 */	fdivs f2, f5, f3
/* 8021740C 002144EC  EC 02 00 7A */	fmadds f0, f2, f1, f0
/* 80217410 002144F0  EC 06 00 2A */	fadds f0, f6, f0
/* 80217414 002144F4  EC 27 00 32 */	fmuls f1, f7, f0
.L_80217418:
/* 80217418 002144F8  E3 E1 00 28 */	psq_l f31, 0x28(r1), 0, qr0
/* 8021741C 002144FC  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80217420 00214500  CB E1 00 20 */	lfd f31, 0x20(r1)
/* 80217424 00214504  7C 08 03 A6 */	mtlr r0
/* 80217428 00214508  38 21 00 30 */	addi r1, r1, 0x30
/* 8021742C 0021450C  4E 80 00 20 */	blr
.endfn RpLightGetConeAngle

.fn RpLightSetConeAngle, global
/* 80217430 00214510  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217434 00214514  7C 08 02 A6 */	mflr r0
/* 80217438 00214518  90 01 00 14 */	stw r0, 0x14(r1)
/* 8021743C 0021451C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80217440 00214520  7C 7F 1B 78 */	mr r31, r3
/* 80217444 00214524  C0 02 BB 68 */	lfs f0, "@336"@sda21(r2)
/* 80217448 00214528  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 8021744C 0021452C  41 80 00 10 */	blt .L_8021745C
/* 80217450 00214530  C0 02 BB 70 */	lfs f0, "@338"@sda21(r2)
/* 80217454 00214534  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 80217458 00214538  40 81 00 0C */	ble .L_80217464
.L_8021745C:
/* 8021745C 0021453C  38 60 00 00 */	li r3, 0x0
/* 80217460 00214540  48 00 00 18 */	b .L_80217478
.L_80217464:
/* 80217464 00214544  4B FD 4F 55 */	bl cos
/* 80217468 00214548  FC 00 08 18 */	frsp f0, f1
/* 8021746C 0021454C  7F E3 FB 78 */	mr r3, r31
/* 80217470 00214550  FC 00 00 50 */	fneg f0, f0
/* 80217474 00214554  D0 1F 00 28 */	stfs f0, 0x28(r31)
.L_80217478:
/* 80217478 00214558  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8021747C 0021455C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80217480 00214560  7C 08 03 A6 */	mtlr r0
/* 80217484 00214564  38 21 00 10 */	addi r1, r1, 0x10
/* 80217488 00214568  4E 80 00 20 */	blr
.endfn RpLightSetConeAngle

.fn RpLightRegisterPlugin, global
/* 8021748C 0021456C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217490 00214570  7C 08 02 A6 */	mflr r0
/* 80217494 00214574  7C E8 3B 78 */	mr r8, r7
/* 80217498 00214578  7C C7 33 78 */	mr r7, r6
/* 8021749C 0021457C  90 01 00 14 */	stw r0, 0x14(r1)
/* 802174A0 00214580  7C 80 23 78 */	mr r0, r4
/* 802174A4 00214584  7C A6 2B 78 */	mr r6, r5
/* 802174A8 00214588  3D 20 80 2B */	lis r9, lightTKList@ha
/* 802174AC 0021458C  7C 64 1B 78 */	mr r4, r3
/* 802174B0 00214590  7C 05 03 78 */	mr r5, r0
/* 802174B4 00214594  38 69 77 78 */	addi r3, r9, lightTKList@l
/* 802174B8 00214598  48 01 C1 A1 */	bl _rwPluginRegistryAddPlugin
/* 802174BC 0021459C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 802174C0 002145A0  7C 08 03 A6 */	mtlr r0
/* 802174C4 002145A4  38 21 00 10 */	addi r1, r1, 0x10
/* 802174C8 002145A8  4E 80 00 20 */	blr
.endfn RpLightRegisterPlugin

.fn RpLightRegisterPluginStream, global
/* 802174CC 002145AC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802174D0 002145B0  7C 08 02 A6 */	mflr r0
/* 802174D4 002145B4  7C C7 33 78 */	mr r7, r6
/* 802174D8 002145B8  7C A6 2B 78 */	mr r6, r5
/* 802174DC 002145BC  90 01 00 14 */	stw r0, 0x14(r1)
/* 802174E0 002145C0  3D 00 80 2B */	lis r8, lightTKList@ha
/* 802174E4 002145C4  7C 60 1B 78 */	mr r0, r3
/* 802174E8 002145C8  7C 85 23 78 */	mr r5, r4
/* 802174EC 002145CC  38 68 77 78 */	addi r3, r8, lightTKList@l
/* 802174F0 002145D0  7C 04 03 78 */	mr r4, r0
/* 802174F4 002145D4  48 01 B9 85 */	bl _rwPluginRegistryAddPluginStream
/* 802174F8 002145D8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 802174FC 002145DC  7C 08 03 A6 */	mtlr r0
/* 80217500 002145E0  38 21 00 10 */	addi r1, r1, 0x10
/* 80217504 002145E4  4E 80 00 20 */	blr
.endfn RpLightRegisterPluginStream

.fn RpLightStreamRead, global
/* 80217508 002145E8  94 21 FF C0 */	stwu r1, -0x40(r1)
/* 8021750C 002145EC  7C 08 02 A6 */	mflr r0
/* 80217510 002145F0  38 80 00 01 */	li r4, 0x1
/* 80217514 002145F4  90 01 00 44 */	stw r0, 0x44(r1)
/* 80217518 002145F8  38 A1 00 0C */	addi r5, r1, 0xc
/* 8021751C 002145FC  38 C1 00 08 */	addi r6, r1, 0x8
/* 80217520 00214600  93 E1 00 3C */	stw r31, 0x3c(r1)
/* 80217524 00214604  93 C1 00 38 */	stw r30, 0x38(r1)
/* 80217528 00214608  7C 7E 1B 78 */	mr r30, r3
/* 8021752C 0021460C  48 01 76 89 */	bl RwStreamFindChunk
/* 80217530 00214610  2C 03 00 00 */	cmpwi r3, 0x0
/* 80217534 00214614  40 82 00 0C */	bne .L_80217540
/* 80217538 00214618  38 60 00 00 */	li r3, 0x0
/* 8021753C 0021461C  48 00 01 6C */	b .L_802176A8
.L_80217540:
/* 80217540 00214620  3C 60 00 03 */	lis r3, 0x3
/* 80217544 00214624  80 81 00 08 */	lwz r4, 0x8(r1)
/* 80217548 00214628  38 03 10 00 */	addi r0, r3, 0x1000
/* 8021754C 0021462C  7C 04 00 40 */	cmplw r4, r0
/* 80217550 00214630  41 80 01 30 */	blt .L_80217680
/* 80217554 00214634  38 03 50 00 */	addi r0, r3, 0x5000
/* 80217558 00214638  7C 04 00 40 */	cmplw r4, r0
/* 8021755C 0021463C  41 81 01 24 */	bgt .L_80217680
/* 80217560 00214640  38 61 00 18 */	addi r3, r1, 0x18
/* 80217564 00214644  38 80 00 00 */	li r4, 0x0
/* 80217568 00214648  38 A0 00 18 */	li r5, 0x18
/* 8021756C 0021464C  4B DE BE ED */	bl memset
/* 80217570 00214650  80 A1 00 0C */	lwz r5, 0xc(r1)
/* 80217574 00214654  7F C3 F3 78 */	mr r3, r30
/* 80217578 00214658  38 81 00 18 */	addi r4, r1, 0x18
/* 8021757C 0021465C  48 01 AF F9 */	bl RwStreamRead
/* 80217580 00214660  80 01 00 0C */	lwz r0, 0xc(r1)
/* 80217584 00214664  7C 00 18 40 */	cmplw r0, r3
/* 80217588 00214668  41 82 00 0C */	beq .L_80217594
/* 8021758C 0021466C  38 60 00 00 */	li r3, 0x0
/* 80217590 00214670  48 00 01 18 */	b .L_802176A8
.L_80217594:
/* 80217594 00214674  38 61 00 18 */	addi r3, r1, 0x18
/* 80217598 00214678  38 80 00 18 */	li r4, 0x18
/* 8021759C 0021467C  48 01 79 11 */	bl RwMemNative32
/* 802175A0 00214680  80 01 00 2C */	lwz r0, 0x2c(r1)
/* 802175A4 00214684  54 03 86 3E */	extrwi r3, r0, 8, 8
/* 802175A8 00214688  48 00 01 79 */	bl RpLightCreate
/* 802175AC 0021468C  7C 7F 1B 79 */	mr. r31, r3
/* 802175B0 00214690  40 82 00 0C */	bne .L_802175BC
/* 802175B4 00214694  38 60 00 00 */	li r3, 0x0
/* 802175B8 00214698  48 00 00 F0 */	b .L_802176A8
.L_802175BC:
/* 802175BC 0021469C  C0 01 00 18 */	lfs f0, 0x18(r1)
/* 802175C0 002146A0  3C 60 00 03 */	lis r3, 0x3
/* 802175C4 002146A4  38 03 03 00 */	addi r0, r3, 0x300
/* 802175C8 002146A8  D0 1F 00 14 */	stfs f0, 0x14(r31)
/* 802175CC 002146AC  C0 01 00 1C */	lfs f0, 0x1c(r1)
/* 802175D0 002146B0  D0 1F 00 18 */	stfs f0, 0x18(r31)
/* 802175D4 002146B4  C0 01 00 20 */	lfs f0, 0x20(r1)
/* 802175D8 002146B8  D0 1F 00 1C */	stfs f0, 0x1c(r31)
/* 802175DC 002146BC  C0 01 00 24 */	lfs f0, 0x24(r1)
/* 802175E0 002146C0  D0 1F 00 20 */	stfs f0, 0x20(r31)
/* 802175E4 002146C4  80 61 00 08 */	lwz r3, 0x8(r1)
/* 802175E8 002146C8  7C 03 00 40 */	cmplw r3, r0
/* 802175EC 002146CC  40 80 00 28 */	bge .L_80217614
/* 802175F0 002146D0  C0 01 00 28 */	lfs f0, 0x28(r1)
/* 802175F4 002146D4  C0 22 BB 94 */	lfs f1, "@347"@sda21(r2)
/* 802175F8 002146D8  EC 00 00 32 */	fmuls f0, f0, f0
/* 802175FC 002146DC  EC 01 00 2A */	fadds f0, f1, f0
/* 80217600 002146E0  EC 21 00 24 */	fdivs f1, f1, f0
/* 80217604 002146E4  48 01 C6 C1 */	bl _rwSqrt
/* 80217608 002146E8  FC 00 08 50 */	fneg f0, f1
/* 8021760C 002146EC  D0 1F 00 28 */	stfs f0, 0x28(r31)
/* 80217610 002146F0  48 00 00 0C */	b .L_8021761C
.L_80217614:
/* 80217614 002146F4  C0 01 00 28 */	lfs f0, 0x28(r1)
/* 80217618 002146F8  D0 1F 00 28 */	stfs f0, 0x28(r31)
.L_8021761C:
/* 8021761C 002146FC  C0 3F 00 18 */	lfs f1, 0x18(r31)
/* 80217620 00214700  C0 1F 00 1C */	lfs f0, 0x1c(r31)
/* 80217624 00214704  FC 01 00 00 */	fcmpu cr0, f1, f0
/* 80217628 00214708  40 82 00 1C */	bne .L_80217644
/* 8021762C 0021470C  C0 1F 00 20 */	lfs f0, 0x20(r31)
/* 80217630 00214710  FC 01 00 00 */	fcmpu cr0, f1, f0
/* 80217634 00214714  40 82 00 10 */	bne .L_80217644
/* 80217638 00214718  38 00 00 01 */	li r0, 0x1
/* 8021763C 0021471C  98 1F 00 03 */	stb r0, 0x3(r31)
/* 80217640 00214720  48 00 00 0C */	b .L_8021764C
.L_80217644:
/* 80217644 00214724  38 00 00 00 */	li r0, 0x0
/* 80217648 00214728  98 1F 00 03 */	stb r0, 0x3(r31)
.L_8021764C:
/* 8021764C 0021472C  80 01 00 2C */	lwz r0, 0x2c(r1)
/* 80217650 00214730  3C 60 80 2B */	lis r3, lightTKList@ha
/* 80217654 00214734  38 63 77 78 */	addi r3, r3, lightTKList@l
/* 80217658 00214738  7F C4 F3 78 */	mr r4, r30
/* 8021765C 0021473C  98 1F 00 02 */	stb r0, 0x2(r31)
/* 80217660 00214740  7F E5 FB 78 */	mr r5, r31
/* 80217664 00214744  48 01 B8 D1 */	bl _rwPluginRegistryReadDataChunks
/* 80217668 00214748  28 03 00 00 */	cmplwi r3, 0x0
/* 8021766C 0021474C  40 82 00 0C */	bne .L_80217678
/* 80217670 00214750  38 60 00 00 */	li r3, 0x0
/* 80217674 00214754  48 00 00 34 */	b .L_802176A8
.L_80217678:
/* 80217678 00214758  7F E3 FB 78 */	mr r3, r31
/* 8021767C 0021475C  48 00 00 2C */	b .L_802176A8
.L_80217680:
/* 80217680 00214760  38 00 00 02 */	li r0, 0x2
/* 80217684 00214764  3C 60 80 00 */	lis r3, 0x8000
/* 80217688 00214768  90 01 00 10 */	stw r0, 0x10(r1)
/* 8021768C 0021476C  38 63 00 04 */	addi r3, r3, 0x4
/* 80217690 00214770  4C C6 31 82 */	crclr 4*cr1+eq
/* 80217694 00214774  48 01 7F A1 */	bl _rwerror
/* 80217698 00214778  90 61 00 14 */	stw r3, 0x14(r1)
/* 8021769C 0021477C  38 61 00 10 */	addi r3, r1, 0x10
/* 802176A0 00214780  48 01 7E F1 */	bl RwErrorSet
/* 802176A4 00214784  38 60 00 00 */	li r3, 0x0
.L_802176A8:
/* 802176A8 00214788  80 01 00 44 */	lwz r0, 0x44(r1)
/* 802176AC 0021478C  83 E1 00 3C */	lwz r31, 0x3c(r1)
/* 802176B0 00214790  83 C1 00 38 */	lwz r30, 0x38(r1)
/* 802176B4 00214794  7C 08 03 A6 */	mtlr r0
/* 802176B8 00214798  38 21 00 40 */	addi r1, r1, 0x40
/* 802176BC 0021479C  4E 80 00 20 */	blr
.endfn RpLightStreamRead

.fn RpLightDestroy, global
/* 802176C0 002147A0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802176C4 002147A4  7C 08 02 A6 */	mflr r0
/* 802176C8 002147A8  3C 80 80 2B */	lis r4, lightTKList@ha
/* 802176CC 002147AC  90 01 00 14 */	stw r0, 0x14(r1)
/* 802176D0 002147B0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 802176D4 002147B4  7C 7F 1B 78 */	mr r31, r3
/* 802176D8 002147B8  38 64 77 78 */	addi r3, r4, lightTKList@l
/* 802176DC 002147BC  7F E4 FB 78 */	mr r4, r31
/* 802176E0 002147C0  48 01 C2 ED */	bl _rwPluginRegistryDeInitObject
/* 802176E4 002147C4  7F E3 FB 78 */	mr r3, r31
/* 802176E8 002147C8  48 02 7B 81 */	bl _rwObjectHasFrameReleaseFrame
/* 802176EC 002147CC  80 6D 9F 7C */	lwz r3, RwEngineInstance@sda21(r13)
/* 802176F0 002147D0  7F E4 FB 78 */	mr r4, r31
/* 802176F4 002147D4  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 802176F8 002147D8  81 83 01 48 */	lwz r12, 0x148(r3)
/* 802176FC 002147DC  7C 63 00 2E */	lwzx r3, r3, r0
/* 80217700 002147E0  7D 89 03 A6 */	mtctr r12
/* 80217704 002147E4  4E 80 04 21 */	bctrl
/* 80217708 002147E8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8021770C 002147EC  38 60 00 01 */	li r3, 0x1
/* 80217710 002147F0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80217714 002147F4  7C 08 03 A6 */	mtlr r0
/* 80217718 002147F8  38 21 00 10 */	addi r1, r1, 0x10
/* 8021771C 002147FC  4E 80 00 20 */	blr
.endfn RpLightDestroy

.fn RpLightCreate, global
/* 80217720 00214800  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217724 00214804  7C 08 02 A6 */	mflr r0
/* 80217728 00214808  90 01 00 14 */	stw r0, 0x14(r1)
/* 8021772C 0021480C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80217730 00214810  93 C1 00 08 */	stw r30, 0x8(r1)
/* 80217734 00214814  7C 7E 1B 78 */	mr r30, r3
/* 80217738 00214818  80 8D 9F 7C */	lwz r4, RwEngineInstance@sda21(r13)
/* 8021773C 0021481C  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 80217740 00214820  81 84 01 44 */	lwz r12, 0x144(r4)
/* 80217744 00214824  7C 64 00 2E */	lwzx r3, r4, r0
/* 80217748 00214828  7D 89 03 A6 */	mtctr r12
/* 8021774C 0021482C  4E 80 04 21 */	bctrl
/* 80217750 00214830  7C 7F 1B 79 */	mr. r31, r3
/* 80217754 00214834  40 82 00 0C */	bne .L_80217760
/* 80217758 00214838  38 60 00 00 */	li r3, 0x0
/* 8021775C 0021483C  48 00 00 A0 */	b .L_802177FC
.L_80217760:
/* 80217760 00214840  39 00 00 03 */	li r8, 0x3
/* 80217764 00214844  3C 80 80 21 */	lis r4, LightSync@ha
/* 80217768 00214848  99 1F 00 00 */	stb r8, 0x0(r31)
/* 8021776C 0021484C  38 C4 71 6C */	addi r6, r4, LightSync@l
/* 80217770 00214850  3C 60 80 2B */	lis r3, lightTKList@ha
/* 80217774 00214854  38 E0 00 00 */	li r7, 0x0
/* 80217778 00214858  9B DF 00 01 */	stb r30, 0x1(r31)
/* 8021777C 0021485C  38 A0 00 01 */	li r5, 0x1
/* 80217780 00214860  38 1F 00 2C */	addi r0, r31, 0x2c
/* 80217784 00214864  38 63 77 78 */	addi r3, r3, lightTKList@l
/* 80217788 00214868  98 FF 00 02 */	stb r7, 0x2(r31)
/* 8021778C 0021486C  7F E4 FB 78 */	mr r4, r31
/* 80217790 00214870  98 FF 00 03 */	stb r7, 0x3(r31)
/* 80217794 00214874  90 FF 00 04 */	stw r7, 0x4(r31)
/* 80217798 00214878  90 DF 00 10 */	stw r6, 0x10(r31)
/* 8021779C 0021487C  C0 02 BB 68 */	lfs f0, "@336"@sda21(r2)
/* 802177A0 00214880  D0 1F 00 14 */	stfs f0, 0x14(r31)
/* 802177A4 00214884  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 802177A8 00214888  D0 1F 00 28 */	stfs f0, 0x28(r31)
/* 802177AC 0021488C  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 802177B0 00214890  D0 1F 00 18 */	stfs f0, 0x18(r31)
/* 802177B4 00214894  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 802177B8 00214898  D0 1F 00 1C */	stfs f0, 0x1c(r31)
/* 802177BC 0021489C  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 802177C0 002148A0  D0 1F 00 20 */	stfs f0, 0x20(r31)
/* 802177C4 002148A4  C0 02 BB 94 */	lfs f0, "@347"@sda21(r2)
/* 802177C8 002148A8  D0 1F 00 24 */	stfs f0, 0x24(r31)
/* 802177CC 002148AC  98 BF 00 03 */	stb r5, 0x3(r31)
/* 802177D0 002148B0  90 1F 00 2C */	stw r0, 0x2c(r31)
/* 802177D4 002148B4  90 1F 00 30 */	stw r0, 0x30(r31)
/* 802177D8 002148B8  90 FF 00 38 */	stw r7, 0x38(r31)
/* 802177DC 002148BC  90 FF 00 34 */	stw r7, 0x34(r31)
/* 802177E0 002148C0  80 AD 9F 7C */	lwz r5, RwEngineInstance@sda21(r13)
/* 802177E4 002148C4  A0 A5 00 0A */	lhz r5, 0xa(r5)
/* 802177E8 002148C8  38 05 FF FF */	addi r0, r5, -0x1
/* 802177EC 002148CC  B0 1F 00 3C */	sth r0, 0x3c(r31)
/* 802177F0 002148D0  99 1F 00 02 */	stb r8, 0x2(r31)
/* 802177F4 002148D4  48 01 C1 31 */	bl _rwPluginRegistryInitObject
/* 802177F8 002148D8  7F E3 FB 78 */	mr r3, r31
.L_802177FC:
/* 802177FC 002148DC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80217800 002148E0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80217804 002148E4  83 C1 00 08 */	lwz r30, 0x8(r1)
/* 80217808 002148E8  7C 08 03 A6 */	mtlr r0
/* 8021780C 002148EC  38 21 00 10 */	addi r1, r1, 0x10
/* 80217810 002148F0  4E 80 00 20 */	blr
.endfn RpLightCreate

.fn _rpLightClose, global
/* 80217814 002148F4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217818 002148F8  7C 08 02 A6 */	mflr r0
/* 8021781C 002148FC  3C 80 80 21 */	lis r4, LightTidyDestroyLight@ha
/* 80217820 00214900  38 A0 00 00 */	li r5, 0x0
/* 80217824 00214904  90 01 00 14 */	stw r0, 0x14(r1)
/* 80217828 00214908  38 84 71 4C */	addi r4, r4, LightTidyDestroyLight@l
/* 8021782C 0021490C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80217830 00214910  7C 7F 1B 78 */	mr r31, r3
/* 80217834 00214914  80 CD 9F 7C */	lwz r6, RwEngineInstance@sda21(r13)
/* 80217838 00214918  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 8021783C 0021491C  7C 66 00 2E */	lwzx r3, r6, r0
/* 80217840 00214920  48 01 9F C9 */	bl RwFreeListForAllUsed
/* 80217844 00214924  80 6D 9F 7C */	lwz r3, RwEngineInstance@sda21(r13)
/* 80217848 00214928  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 8021784C 0021492C  7C 63 00 2E */	lwzx r3, r3, r0
/* 80217850 00214930  48 01 9B 91 */	bl RwFreeListDestroy
/* 80217854 00214934  80 8D 9F 7C */	lwz r4, RwEngineInstance@sda21(r13)
/* 80217858 00214938  38 C0 00 00 */	li r6, 0x0
/* 8021785C 0021493C  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 80217860 00214940  38 AD 9E B8 */	addi r5, r13, lightModule@sda21
/* 80217864 00214944  7F E3 FB 78 */	mr r3, r31
/* 80217868 00214948  7C C4 01 2E */	stwx r6, r4, r0
/* 8021786C 0021494C  80 85 00 04 */	lwz r4, 0x4(r5)
/* 80217870 00214950  38 04 FF FF */	addi r0, r4, -0x1
/* 80217874 00214954  90 05 00 04 */	stw r0, 0x4(r5)
/* 80217878 00214958  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8021787C 0021495C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80217880 00214960  7C 08 03 A6 */	mtlr r0
/* 80217884 00214964  38 21 00 10 */	addi r1, r1, 0x10
/* 80217888 00214968  4E 80 00 20 */	blr
.endfn _rpLightClose

.fn _rpLightOpen, global
/* 8021788C 0021496C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80217890 00214970  7C 08 02 A6 */	mflr r0
/* 80217894 00214974  3C A0 80 38 */	lis r5, _rpLightFreeList@ha
/* 80217898 00214978  90 01 00 14 */	stw r0, 0x14(r1)
/* 8021789C 0021497C  38 E5 36 C8 */	addi r7, r5, _rpLightFreeList@l
/* 802178A0 00214980  38 A0 00 04 */	li r5, 0x4
/* 802178A4 00214984  93 E1 00 0C */	stw r31, 0xc(r1)
/* 802178A8 00214988  7C 7F 1B 78 */	mr r31, r3
/* 802178AC 0021498C  90 8D 9E B8 */	stw r4, lightModule@sda21(r13)
/* 802178B0 00214990  3C 80 80 2B */	lis r4, lightTKList@ha
/* 802178B4 00214994  38 64 77 78 */	addi r3, r4, lightTKList@l
/* 802178B8 00214998  80 8D 87 50 */	lwz r4, _rpLightFreeListBlockSize@sda21(r13)
/* 802178BC 0021499C  80 63 00 00 */	lwz r3, 0x0(r3)
/* 802178C0 002149A0  80 CD 87 54 */	lwz r6, _rpLightFreeListPreallocBlocks@sda21(r13)
/* 802178C4 002149A4  48 01 9A 45 */	bl RwFreeListCreateAndPreallocateSpace
/* 802178C8 002149A8  80 8D 9F 7C */	lwz r4, RwEngineInstance@sda21(r13)
/* 802178CC 002149AC  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 802178D0 002149B0  7C 64 01 2E */	stwx r3, r4, r0
/* 802178D4 002149B4  80 6D 9F 7C */	lwz r3, RwEngineInstance@sda21(r13)
/* 802178D8 002149B8  80 0D 9E B8 */	lwz r0, lightModule@sda21(r13)
/* 802178DC 002149BC  7C 03 00 2E */	lwzx r0, r3, r0
/* 802178E0 002149C0  28 00 00 00 */	cmplwi r0, 0x0
/* 802178E4 002149C4  41 82 00 1C */	beq .L_80217900
/* 802178E8 002149C8  38 AD 9E B8 */	addi r5, r13, lightModule@sda21
/* 802178EC 002149CC  7F E3 FB 78 */	mr r3, r31
/* 802178F0 002149D0  80 85 00 04 */	lwz r4, 0x4(r5)
/* 802178F4 002149D4  38 04 00 01 */	addi r0, r4, 0x1
/* 802178F8 002149D8  90 05 00 04 */	stw r0, 0x4(r5)
/* 802178FC 002149DC  48 00 00 08 */	b .L_80217904
.L_80217900:
/* 80217900 002149E0  38 60 00 00 */	li r3, 0x0
.L_80217904:
/* 80217904 002149E4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80217908 002149E8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8021790C 002149EC  7C 08 03 A6 */	mtlr r0
/* 80217910 002149F0  38 21 00 10 */	addi r1, r1, 0x10
/* 80217914 002149F4  4E 80 00 20 */	blr
.endfn _rpLightOpen

# 0x802B7778 - 0x802B7790
.data
.balign 8

.obj lightTKList, local
	.4byte 0x00000040
	.4byte 0x00000040
	.4byte 0x00000000
	.4byte 0x00000000
	.4byte 0x00000000
	.4byte 0x00000000
.endobj lightTKList

# 0x803836C8 - 0x803836F0
.section .bss, "wa", @nobits
.balign 8

.obj _rpLightFreeList, local
	.skip 0x24
.endobj _rpLightFreeList
	.skip 0x4

# 0x803CB050 - 0x803CB058
.section .sdata, "wa"
.balign 8

.obj _rpLightFreeListBlockSize, local
	.4byte 0x00000020
.endobj _rpLightFreeListBlockSize

.obj _rpLightFreeListPreallocBlocks, local
	.4byte 0x00000001
.endobj _rpLightFreeListPreallocBlocks

# 0x803CC7B8 - 0x803CC7C0
.section .sbss, "wa", @nobits
.balign 8

.obj lightModule, local
	.skip 0x8
.endobj lightModule

# 0x803D04E8 - 0x803D0538
.section .sdata2, "a"
.balign 8

.obj "@336", local
	.4byte 0x00000000
.endobj "@336"

.obj "@337", local
	.4byte 0x40490FDB
.endobj "@337"

.obj "@338", local
	.4byte 0x3FC90FDB
.endobj "@338"

.obj "@339", local
	.4byte 0x3FC90FDA
.endobj "@339"

.obj "@340", local
	.4byte 0x33A22168
.endobj "@340"

.obj "@341", local
	.4byte 0x3E2AAAAB
.endobj "@341"

.obj "@342", local
	.4byte 0xBEA6B090
.endobj "@342"

.obj "@343", local
	.4byte 0x3E4E0AA8
.endobj "@343"

.obj "@344", local
	.4byte 0xBD241146
.endobj "@344"

.obj "@345", local
	.4byte 0x3A4F7F04
.endobj "@345"

.obj "@346", local
	.4byte 0x3811EF08
.endobj "@346"

.obj "@347", local
	.4byte 0x3F800000
.endobj "@347"

.obj "@348", local
	.4byte 0xC019D139
.endobj "@348"

.obj "@349", local
	.4byte 0x4001572D
.endobj "@349"

.obj "@350", local
	.4byte 0xBF303361
.endobj "@350"

.obj "@351", local
	.4byte 0x3D9DC62E
.endobj "@351"

.obj "@352", local
	.4byte 0x3F000000
.endobj "@352"

.obj "@353", local
	.4byte 0x40490FDA
.endobj "@353"

.obj "@354", local
	.4byte 0x40000000
.endobj "@354"
	.4byte 0x00000000
