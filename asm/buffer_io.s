.include "macros.inc"
.file "buffer_io.c"

# 0x801E1E30 - 0x801E215C
.text
.balign 4

.fn setvbuf, global
/* 801E1E30 001DEF10  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 801E1E34 001DEF14  7C 08 02 A6 */	mflr r0
/* 801E1E38 001DEF18  90 01 00 24 */	stw r0, 0x24(r1)
/* 801E1E3C 001DEF1C  BF 61 00 0C */	stmw r27, 0xc(r1)
/* 801E1E40 001DEF20  7C BB 2B 79 */	mr. r27, r5
/* 801E1E44 001DEF24  7C 7D 1B 78 */	mr r29, r3
/* 801E1E48 001DEF28  7C 9E 23 78 */	mr r30, r4
/* 801E1E4C 001DEF2C  7C DF 33 78 */	mr r31, r6
/* 801E1E50 001DEF30  A0 03 00 04 */	lhz r0, 0x4(r3)
/* 801E1E54 001DEF34  54 1C D7 7E */	extrwi r28, r0, 3, 23
/* 801E1E58 001DEF38  40 82 00 08 */	bne .L_801E1E60
/* 801E1E5C 001DEF3C  48 00 13 09 */	bl fflush
.L_801E1E60:
/* 801E1E60 001DEF40  88 1D 00 08 */	lbz r0, 0x8(r29)
/* 801E1E64 001DEF44  54 00 DF 7F */	extrwi. r0, r0, 3, 24
/* 801E1E68 001DEF48  40 82 00 0C */	bne .L_801E1E74
/* 801E1E6C 001DEF4C  2C 1C 00 00 */	cmpwi r28, 0x0
/* 801E1E70 001DEF50  40 82 00 0C */	bne .L_801E1E7C
.L_801E1E74:
/* 801E1E74 001DEF54  38 60 FF FF */	li r3, -0x1
/* 801E1E78 001DEF58  48 00 01 08 */	b .L_801E1F80
.L_801E1E7C:
/* 801E1E7C 001DEF5C  2C 1B 00 00 */	cmpwi r27, 0x0
/* 801E1E80 001DEF60  41 82 00 1C */	beq .L_801E1E9C
/* 801E1E84 001DEF64  2C 1B 00 01 */	cmpwi r27, 0x1
/* 801E1E88 001DEF68  41 82 00 14 */	beq .L_801E1E9C
/* 801E1E8C 001DEF6C  2C 1B 00 02 */	cmpwi r27, 0x2
/* 801E1E90 001DEF70  41 82 00 0C */	beq .L_801E1E9C
/* 801E1E94 001DEF74  38 60 FF FF */	li r3, -0x1
/* 801E1E98 001DEF78  48 00 00 E8 */	b .L_801E1F80
.L_801E1E9C:
/* 801E1E9C 001DEF7C  80 7D 00 1C */	lwz r3, 0x1c(r29)
/* 801E1EA0 001DEF80  28 03 00 00 */	cmplwi r3, 0x0
/* 801E1EA4 001DEF84  41 82 00 14 */	beq .L_801E1EB8
/* 801E1EA8 001DEF88  88 1D 00 08 */	lbz r0, 0x8(r29)
/* 801E1EAC 001DEF8C  54 00 E7 FF */	extrwi. r0, r0, 1, 27
/* 801E1EB0 001DEF90  41 82 00 08 */	beq .L_801E1EB8
/* 801E1EB4 001DEF94  4B EF 18 E1 */	bl free
.L_801E1EB8:
/* 801E1EB8 001DEF98  38 60 00 02 */	li r3, 0x2
/* 801E1EBC 001DEF9C  48 00 07 45 */	bl __begin_critical_region
/* 801E1EC0 001DEFA0  88 1D 00 04 */	lbz r0, 0x4(r29)
/* 801E1EC4 001DEFA4  53 60 0F 7C */	rlwimi r0, r27, 1, 29, 30
/* 801E1EC8 001DEFA8  38 A0 00 00 */	li r5, 0x0
/* 801E1ECC 001DEFAC  38 7D 00 0D */	addi r3, r29, 0xd
/* 801E1ED0 001DEFB0  98 1D 00 04 */	stb r0, 0x4(r29)
/* 801E1ED4 001DEFB4  38 00 00 01 */	li r0, 0x1
/* 801E1ED8 001DEFB8  2C 1B 00 00 */	cmpwi r27, 0x0
/* 801E1EDC 001DEFBC  88 9D 00 08 */	lbz r4, 0x8(r29)
/* 801E1EE0 001DEFC0  50 A4 26 F6 */	rlwimi r4, r5, 4, 27, 27
/* 801E1EE4 001DEFC4  98 9D 00 08 */	stb r4, 0x8(r29)
/* 801E1EE8 001DEFC8  90 7D 00 1C */	stw r3, 0x1c(r29)
/* 801E1EEC 001DEFCC  90 7D 00 24 */	stw r3, 0x24(r29)
/* 801E1EF0 001DEFD0  90 1D 00 20 */	stw r0, 0x20(r29)
/* 801E1EF4 001DEFD4  90 BD 00 28 */	stw r5, 0x28(r29)
/* 801E1EF8 001DEFD8  90 BD 00 2C */	stw r5, 0x2c(r29)
/* 801E1EFC 001DEFDC  41 82 00 0C */	beq .L_801E1F08
/* 801E1F00 001DEFE0  28 1F 00 01 */	cmplwi r31, 0x1
/* 801E1F04 001DEFE4  40 80 00 20 */	bge .L_801E1F24
.L_801E1F08:
/* 801E1F08 001DEFE8  80 9D 00 24 */	lwz r4, 0x24(r29)
/* 801E1F0C 001DEFEC  38 00 00 00 */	li r0, 0x0
/* 801E1F10 001DEFF0  38 60 00 02 */	li r3, 0x2
/* 801E1F14 001DEFF4  98 04 00 00 */	stb r0, 0x0(r4)
/* 801E1F18 001DEFF8  48 00 06 E5 */	bl __end_critical_region
/* 801E1F1C 001DEFFC  38 60 00 00 */	li r3, 0x0
/* 801E1F20 001DF000  48 00 00 60 */	b .L_801E1F80
.L_801E1F24:
/* 801E1F24 001DF004  28 1E 00 00 */	cmplwi r30, 0x0
/* 801E1F28 001DF008  40 82 00 34 */	bne .L_801E1F5C
/* 801E1F2C 001DF00C  7F E3 FB 78 */	mr r3, r31
/* 801E1F30 001DF010  4B EF 18 19 */	bl malloc
/* 801E1F34 001DF014  7C 7E 1B 79 */	mr. r30, r3
/* 801E1F38 001DF018  40 82 00 14 */	bne .L_801E1F4C
/* 801E1F3C 001DF01C  38 60 00 02 */	li r3, 0x2
/* 801E1F40 001DF020  48 00 06 BD */	bl __end_critical_region
/* 801E1F44 001DF024  38 60 FF FF */	li r3, -0x1
/* 801E1F48 001DF028  48 00 00 38 */	b .L_801E1F80
.L_801E1F4C:
/* 801E1F4C 001DF02C  88 1D 00 08 */	lbz r0, 0x8(r29)
/* 801E1F50 001DF030  38 60 00 01 */	li r3, 0x1
/* 801E1F54 001DF034  50 60 26 F6 */	rlwimi r0, r3, 4, 27, 27
/* 801E1F58 001DF038  98 1D 00 08 */	stb r0, 0x8(r29)
.L_801E1F5C:
/* 801E1F5C 001DF03C  93 DD 00 1C */	stw r30, 0x1c(r29)
/* 801E1F60 001DF040  38 00 00 00 */	li r0, 0x0
/* 801E1F64 001DF044  38 60 00 02 */	li r3, 0x2
/* 801E1F68 001DF048  80 9D 00 1C */	lwz r4, 0x1c(r29)
/* 801E1F6C 001DF04C  90 9D 00 24 */	stw r4, 0x24(r29)
/* 801E1F70 001DF050  93 FD 00 20 */	stw r31, 0x20(r29)
/* 801E1F74 001DF054  90 1D 00 2C */	stw r0, 0x2c(r29)
/* 801E1F78 001DF058  48 00 06 85 */	bl __end_critical_region
/* 801E1F7C 001DF05C  38 60 00 00 */	li r3, 0x0
.L_801E1F80:
/* 801E1F80 001DF060  BB 61 00 0C */	lmw r27, 0xc(r1)
/* 801E1F84 001DF064  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801E1F88 001DF068  7C 08 03 A6 */	mtlr r0
/* 801E1F8C 001DF06C  38 21 00 20 */	addi r1, r1, 0x20
/* 801E1F90 001DF070  4E 80 00 20 */	blr
.endfn setvbuf

.fn __flush_buffer, global
/* 801E1F94 001DF074  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 801E1F98 001DF078  7C 08 02 A6 */	mflr r0
/* 801E1F9C 001DF07C  90 01 00 14 */	stw r0, 0x14(r1)
/* 801E1FA0 001DF080  93 E1 00 0C */	stw r31, 0xc(r1)
/* 801E1FA4 001DF084  7C 7F 1B 78 */	mr r31, r3
/* 801E1FA8 001DF088  93 C1 00 08 */	stw r30, 0x8(r1)
/* 801E1FAC 001DF08C  7C 9E 23 78 */	mr r30, r4
/* 801E1FB0 001DF090  80 63 00 1C */	lwz r3, 0x1c(r3)
/* 801E1FB4 001DF094  80 1F 00 24 */	lwz r0, 0x24(r31)
/* 801E1FB8 001DF098  7C 03 00 51 */	subf. r0, r3, r0
/* 801E1FBC 001DF09C  41 82 00 50 */	beq .L_801E200C
/* 801E1FC0 001DF0A0  90 1F 00 28 */	stw r0, 0x28(r31)
/* 801E1FC4 001DF0A4  38 BF 00 28 */	addi r5, r31, 0x28
/* 801E1FC8 001DF0A8  81 9F 00 40 */	lwz r12, 0x40(r31)
/* 801E1FCC 001DF0AC  80 7F 00 00 */	lwz r3, 0x0(r31)
/* 801E1FD0 001DF0B0  80 9F 00 1C */	lwz r4, 0x1c(r31)
/* 801E1FD4 001DF0B4  80 DF 00 48 */	lwz r6, 0x48(r31)
/* 801E1FD8 001DF0B8  7D 89 03 A6 */	mtctr r12
/* 801E1FDC 001DF0BC  4E 80 04 21 */	bctrl
/* 801E1FE0 001DF0C0  28 1E 00 00 */	cmplwi r30, 0x0
/* 801E1FE4 001DF0C4  41 82 00 0C */	beq .L_801E1FF0
/* 801E1FE8 001DF0C8  80 1F 00 28 */	lwz r0, 0x28(r31)
/* 801E1FEC 001DF0CC  90 1E 00 00 */	stw r0, 0x0(r30)
.L_801E1FF0:
/* 801E1FF0 001DF0D0  2C 03 00 00 */	cmpwi r3, 0x0
/* 801E1FF4 001DF0D4  41 82 00 08 */	beq .L_801E1FFC
/* 801E1FF8 001DF0D8  48 00 00 48 */	b .L_801E2040
.L_801E1FFC:
/* 801E1FFC 001DF0DC  80 7F 00 18 */	lwz r3, 0x18(r31)
/* 801E2000 001DF0E0  80 1F 00 28 */	lwz r0, 0x28(r31)
/* 801E2004 001DF0E4  7C 03 02 14 */	add r0, r3, r0
/* 801E2008 001DF0E8  90 1F 00 18 */	stw r0, 0x18(r31)
.L_801E200C:
/* 801E200C 001DF0EC  80 1F 00 1C */	lwz r0, 0x1c(r31)
/* 801E2010 001DF0F0  38 60 00 00 */	li r3, 0x0
/* 801E2014 001DF0F4  90 1F 00 24 */	stw r0, 0x24(r31)
/* 801E2018 001DF0F8  80 1F 00 20 */	lwz r0, 0x20(r31)
/* 801E201C 001DF0FC  90 1F 00 28 */	stw r0, 0x28(r31)
/* 801E2020 001DF100  80 BF 00 18 */	lwz r5, 0x18(r31)
/* 801E2024 001DF104  80 9F 00 2C */	lwz r4, 0x2c(r31)
/* 801E2028 001DF108  80 1F 00 28 */	lwz r0, 0x28(r31)
/* 801E202C 001DF10C  7C A4 20 38 */	and r4, r5, r4
/* 801E2030 001DF110  7C 04 00 50 */	subf r0, r4, r0
/* 801E2034 001DF114  90 1F 00 28 */	stw r0, 0x28(r31)
/* 801E2038 001DF118  80 1F 00 18 */	lwz r0, 0x18(r31)
/* 801E203C 001DF11C  90 1F 00 34 */	stw r0, 0x34(r31)
.L_801E2040:
/* 801E2040 001DF120  80 01 00 14 */	lwz r0, 0x14(r1)
/* 801E2044 001DF124  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 801E2048 001DF128  83 C1 00 08 */	lwz r30, 0x8(r1)
/* 801E204C 001DF12C  7C 08 03 A6 */	mtlr r0
/* 801E2050 001DF130  38 21 00 10 */	addi r1, r1, 0x10
/* 801E2054 001DF134  4E 80 00 20 */	blr
.endfn __flush_buffer

.fn __load_buffer, global
/* 801E2058 001DF138  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 801E205C 001DF13C  7C 08 02 A6 */	mflr r0
/* 801E2060 001DF140  2C 05 00 01 */	cmpwi r5, 0x1
/* 801E2064 001DF144  90 01 00 14 */	stw r0, 0x14(r1)
/* 801E2068 001DF148  93 E1 00 0C */	stw r31, 0xc(r1)
/* 801E206C 001DF14C  7C 9F 23 78 */	mr r31, r4
/* 801E2070 001DF150  93 C1 00 08 */	stw r30, 0x8(r1)
/* 801E2074 001DF154  7C 7E 1B 78 */	mr r30, r3
/* 801E2078 001DF158  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 801E207C 001DF15C  90 03 00 24 */	stw r0, 0x24(r3)
/* 801E2080 001DF160  80 03 00 20 */	lwz r0, 0x20(r3)
/* 801E2084 001DF164  90 03 00 28 */	stw r0, 0x28(r3)
/* 801E2088 001DF168  80 83 00 18 */	lwz r4, 0x18(r3)
/* 801E208C 001DF16C  80 63 00 2C */	lwz r3, 0x2c(r3)
/* 801E2090 001DF170  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 801E2094 001DF174  7C 83 18 38 */	and r3, r4, r3
/* 801E2098 001DF178  7C 03 00 50 */	subf r0, r3, r0
/* 801E209C 001DF17C  90 1E 00 28 */	stw r0, 0x28(r30)
/* 801E20A0 001DF180  80 1E 00 18 */	lwz r0, 0x18(r30)
/* 801E20A4 001DF184  90 1E 00 34 */	stw r0, 0x34(r30)
/* 801E20A8 001DF188  40 82 00 0C */	bne .L_801E20B4
/* 801E20AC 001DF18C  80 1E 00 20 */	lwz r0, 0x20(r30)
/* 801E20B0 001DF190  90 1E 00 28 */	stw r0, 0x28(r30)
.L_801E20B4:
/* 801E20B4 001DF194  81 9E 00 3C */	lwz r12, 0x3c(r30)
/* 801E20B8 001DF198  38 BE 00 28 */	addi r5, r30, 0x28
/* 801E20BC 001DF19C  80 7E 00 00 */	lwz r3, 0x0(r30)
/* 801E20C0 001DF1A0  80 9E 00 1C */	lwz r4, 0x1c(r30)
/* 801E20C4 001DF1A4  80 DE 00 48 */	lwz r6, 0x48(r30)
/* 801E20C8 001DF1A8  7D 89 03 A6 */	mtctr r12
/* 801E20CC 001DF1AC  4E 80 04 21 */	bctrl
/* 801E20D0 001DF1B0  2C 03 00 02 */	cmpwi r3, 0x2
/* 801E20D4 001DF1B4  40 82 00 0C */	bne .L_801E20E0
/* 801E20D8 001DF1B8  38 00 00 00 */	li r0, 0x0
/* 801E20DC 001DF1BC  90 1E 00 28 */	stw r0, 0x28(r30)
.L_801E20E0:
/* 801E20E0 001DF1C0  28 1F 00 00 */	cmplwi r31, 0x0
/* 801E20E4 001DF1C4  41 82 00 0C */	beq .L_801E20F0
/* 801E20E8 001DF1C8  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 801E20EC 001DF1CC  90 1F 00 00 */	stw r0, 0x0(r31)
.L_801E20F0:
/* 801E20F0 001DF1D0  2C 03 00 00 */	cmpwi r3, 0x0
/* 801E20F4 001DF1D4  41 82 00 08 */	beq .L_801E20FC
/* 801E20F8 001DF1D8  48 00 00 18 */	b .L_801E2110
.L_801E20FC:
/* 801E20FC 001DF1DC  80 9E 00 18 */	lwz r4, 0x18(r30)
/* 801E2100 001DF1E0  38 60 00 00 */	li r3, 0x0
/* 801E2104 001DF1E4  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 801E2108 001DF1E8  7C 04 02 14 */	add r0, r4, r0
/* 801E210C 001DF1EC  90 1E 00 18 */	stw r0, 0x18(r30)
.L_801E2110:
/* 801E2110 001DF1F0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 801E2114 001DF1F4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 801E2118 001DF1F8  83 C1 00 08 */	lwz r30, 0x8(r1)
/* 801E211C 001DF1FC  7C 08 03 A6 */	mtlr r0
/* 801E2120 001DF200  38 21 00 10 */	addi r1, r1, 0x10
/* 801E2124 001DF204  4E 80 00 20 */	blr
.endfn __load_buffer

.fn __prep_buffer, global
/* 801E2128 001DF208  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 801E212C 001DF20C  90 03 00 24 */	stw r0, 0x24(r3)
/* 801E2130 001DF210  80 03 00 20 */	lwz r0, 0x20(r3)
/* 801E2134 001DF214  90 03 00 28 */	stw r0, 0x28(r3)
/* 801E2138 001DF218  80 A3 00 18 */	lwz r5, 0x18(r3)
/* 801E213C 001DF21C  80 83 00 2C */	lwz r4, 0x2c(r3)
/* 801E2140 001DF220  80 03 00 28 */	lwz r0, 0x28(r3)
/* 801E2144 001DF224  7C A4 20 38 */	and r4, r5, r4
/* 801E2148 001DF228  7C 04 00 50 */	subf r0, r4, r0
/* 801E214C 001DF22C  90 03 00 28 */	stw r0, 0x28(r3)
/* 801E2150 001DF230  80 03 00 18 */	lwz r0, 0x18(r3)
/* 801E2154 001DF234  90 03 00 34 */	stw r0, 0x34(r3)
/* 801E2158 001DF238  4E 80 00 20 */	blr
.endfn __prep_buffer
